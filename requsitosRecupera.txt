ğŸ§© 1. Crea o usa una cuenta Gmail exclusiva

ğŸ”¹ Usa una cuenta tipo:
miapp.notificaciones@gmail.com
(recomendado: no uses tu cuenta personal)

ğŸ” 2. Activa la verificaciÃ³n en dos pasos

Inicia sesiÃ³n en Gmail.

Entra a ğŸ‘‰ https://myaccount.google.com/security

En la secciÃ³n â€œCÃ³mo inicias sesiÃ³n en Googleâ€, busca â€œVerificaciÃ³n en dos pasosâ€.

ActÃ­vala (te pedirÃ¡ un nÃºmero o mÃ©todo de seguridad).

âš ï¸ Este paso es obligatorio para poder crear la contraseÃ±a de aplicaciÃ³n.

ğŸ”‘ 3. Crea la â€œcontraseÃ±a de aplicaciÃ³nâ€ (App Password)

Una vez activada la verificaciÃ³n en dos pasos, ve a ğŸ‘‰
https://myaccount.google.com/apppasswords

(si te pide iniciar sesiÃ³n, hazlo con la cuenta que usarÃ¡s para enviar correos)

Te aparecerÃ¡ una pantalla que dice:

Selecciona la app: â€œCorreoâ€

Selecciona el dispositivo: â€œOtro (nombre personalizado)â€

Escribe algo como MiAppNode o SistemaRecuperacion.

Presiona â€œCrearâ€ âœ…

Google te mostrarÃ¡ una contraseÃ±a de 16 caracteres, algo asÃ­:

abcd efgh ijkl mnop


ğŸ‘‰ GuÃ¡rdala bien, solo se muestra una vez.

âš™ï¸ 4. Crear tu archivo .env

En la raÃ­z de tu proyecto Node.js crea un archivo llamado .env
y coloca dentro:

GMAIL_USER=miapp.notificaciones@gmail.com
GMAIL_APP_PASSWORD=abcdefghijklmnoq


âš ï¸ Importante: no pongas espacios entre los valores.
Ejemplo correcto âœ…
GMAIL_APP_PASSWORD=abcd efgh ijkl mnop âŒ â†’ NO
GMAIL_APP_PASSWORD=abcdefghijklmnop âœ… â†’ SÃ (todo junto)

ğŸ§± 5. Verifica que tu cÃ³digo lea el .env

Tu cÃ³digo ya lo tiene bien configurado:

import dotenv from 'dotenv'
dotenv.config(); // lee el .env


Y luego usas:

user: process.env.GMAIL_USER,
pass: process.env.GMAIL_APP_PASSWORD


Perfecto âœ…

ğŸ§ª 6. Probar el envÃ­o

Haz una peticiÃ³n POST a tu endpoint que llame requestCode, por ejemplo:

POST /api/requestCode
{
  "correo": "usuario@ejemplo.com"
}


Y en consola deberÃ­as ver:

âœ… Correo REAL enviado a: usuario@ejemplo.com
ğŸ“« ID del mensaje: <...>


Si aparece un error como "Invalid login" o "5.7.0 Authentication Required", revisa:

Que el correo y la contraseÃ±a de aplicaciÃ³n estÃ©n bien.

Que hayas activado la verificaciÃ³n en dos pasos.

Que la contraseÃ±a no tenga espacios.